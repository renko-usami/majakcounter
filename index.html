<!DOCTYPE html>
<meta name="mobile-web-app-capable" content="yes">
<html>
<head>
    <title>마작 점수 계산기</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR&display=swap');
    @import url("https://cdn.jsdelivr.net/gh/moonspam/NanumBarunGothic@latest/nanumbarungothicsubset.css");
    @font-face { font-family: 'NanumBarunGothic'; font-style: normal; font-weight: 400; src: url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWeb.eot'); src: url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWeb.eot?#iefix') format('embedded-opentype'), url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWeb.woff') format('woff'), url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWeb.ttf') format('truetype'); } @font-face { font-family: 'NanumBarunGothic'; font-style: normal; font-weight: 700; src: url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.eot'); src: url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.eot?#iefix') format('embedded-opentype'), url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.woff') format('woff'), url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.ttf') format('truetype') } @font-face { font-family: 'NanumBarunGothic'; font-style: normal; font-weight: 300; src: url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebLight.eot'); src: url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebLight.eot?#iefix') format('embedded-opentype'), url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebLight.woff') format('woff'), url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebLight.ttf') format('truetype'); } .nanumbarungothic * { font-family: 'NanumBarunGothic', sans-serif; }
        html {
            background-color: #ffffff;
        }
        body {
            font-family: 'Noto Serif KR';
        }
        #east_div {
            width: 40vw;
            position: fixed;
            left: 30vw;
            bottom: -2vw;
            text-align: center;
            font-size: 10vw;
            font-weight: 500;
            z-index: 2;
            background-position: center top;
            background-repeat: no-repeat;
            background-size: 0;
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNi43NSAyLjI1Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDpyZWQ7fS5hLC5ie29wYWNpdHk6MC40O30uYntmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOjAuMjVweDt9PC9zdHlsZT48L2RlZnM+PGNpcmNsZSBjbGFzcz0iYSIgY3g9IjEzLjM4IiBjeT0iMS4xMyIgcj0iMC41Ii8+PHJlY3QgY2xhc3M9ImIiIHg9IjAuMTMiIHk9IjAuMTMiIHdpZHRoPSIyNi41IiBoZWlnaHQ9IjIiLz48L3N2Zz4=);
        }
        #west_div {
            width: 40vw;
            transform: rotate(180deg);
            position: fixed;
            left: 30vw;
            top: -3vw;
            text-align: center;
            font-size: 10vw;
            font-weight: 500;
            z-index: 2;
            padding-bottom: 20px;
            background-position: center bottom;
            background-repeat: no-repeat;
            background-size: 0;
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNi43NSAyLjI1Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDpyZWQ7fS5hLC5ie29wYWNpdHk6MC40O30uYntmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOjAuMjVweDt9PC9zdHlsZT48L2RlZnM+PGNpcmNsZSBjbGFzcz0iYSIgY3g9IjEzLjM4IiBjeT0iMS4xMyIgcj0iMC41Ii8+PHJlY3QgY2xhc3M9ImIiIHg9IjAuMTMiIHk9IjAuMTMiIHdpZHRoPSIyNi41IiBoZWlnaHQ9IjIiLz48L3N2Zz4=);
        }
    #north_div {
            width: 80vh;
            transform-origin: 0 0;
            transform: rotate(90deg);
            position: fixed;
            top: 10vh;
            left: 12vw;
            text-align: center;
            font-size: 10vw;
            font-weight: 500;
            z-index: 2;
            background-position: center top;
            background-repeat: no-repeat;
            background-size: 0;
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNi43NSAyLjI1Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDpyZWQ7fS5hLC5ie29wYWNpdHk6MC40O30uYntmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOjAuMjVweDt9PC9zdHlsZT48L2RlZnM+PGNpcmNsZSBjbGFzcz0iYSIgY3g9IjEzLjM4IiBjeT0iMS4xMyIgcj0iMC41Ii8+PHJlY3QgY2xhc3M9ImIiIHg9IjAuMTMiIHk9IjAuMTMiIHdpZHRoPSIyNi41IiBoZWlnaHQ9IjIiLz48L3N2Zz4=);
        }
        #south_div {
            width: 80vh;
            transform-origin: 100% 0;
            transform: rotate(-90deg);
            top: 10vh;
            right: 12vw;
            position: fixed;
            text-align:center;
            font-size: 10vw;
            font-weight: 500;
            z-index: 2;
            background-position: center top;
            background-repeat: no-repeat;
            background-size: 0;
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNi43NSAyLjI1Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDpyZWQ7fS5hLC5ie29wYWNpdHk6MC40O30uYntmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOjAuMjVweDt9PC9zdHlsZT48L2RlZnM+PGNpcmNsZSBjbGFzcz0iYSIgY3g9IjEzLjM4IiBjeT0iMS4xMyIgcj0iMC41Ii8+PHJlY3QgY2xhc3M9ImIiIHg9IjAuMTMiIHk9IjAuMTMiIHdpZHRoPSIyNi41IiBoZWlnaHQ9IjIiLz48L3N2Zz4=);
        }
        #center_div{
            position: fixed;
            display: flex;
            background-color: white;
            width: 100vw;
            height: 100vh;
            left: -4.5vw;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 10vw;
            font-weight: 500;
        }
        #buttons{
            position: absolute;
            left: 68vw;
            font-size: 5vw;
            line-height: normal;
        }

        .btn {
            font-size: 3vh;
        }
        .popup {
            position: absolute;
            left: 50%;
            top: 50%;
            font-size: calc(1.7em + 0.5rem);
            transform: translate(-50%, -50%) !important;
        }
        .form-control-lg {
            width: 70%;
            display: inline;
            transform: translate(0, -10%);
            font-size: 3vh;
            margin-right: 3%;
        }
        .form-check {
            font-size: 1.2rem;
        }
    </style>
</head>

<body>
    <div id='east_div'><span style="font-size:8vw; color:red;">東</span><span id='east_score'>250</span><span style="font-size:8vw">00</span></div>
    <div id='south_div'><span style="font-size:8vw">南</span><span id='south_score'>250</span><span style="font-size:8vw">00</span></div>
    <div id='west_div'><span style="font-size:8vw">西</span><span id='west_score'>250</span><span style="font-size:8vw">00</span></div>
    <div id='north_div'><span style="font-size:8vw">北</span><span id='north_score'>250</span><span style="font-size:8vw">00</span></div>
    <div id='center_div'>
        <div>
            <span id='curr_time'>동 1 국</span>
            <br>
            <div style="display: flex; justify-content: space-evenly;">
                <div style="display: flex;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26.37 38.84" style="width:5vw"><g data-name="레이어 2"><g data-name="레이어 1"><g data-name="그룹 4"><g data-name="사각형 1"><path fill="#fff" d="M0 34.963L19.383-.004l6.997 3.878L6.997 38.842z"></path><path fill="none" stroke="#5d5c5c" d="M.68 34.768L19.578.676l6.113 3.388L6.793 38.157z"></path></g><g data-name="타원 1"><circle cx="13.18" cy="19.43" r="2" fill="#ff8282"></circle><circle cx="13.18" cy="19.43" r="1.5" fill="none" stroke="#ff8282"></circle></g></g></g></g></svg>
                    <span id='riichi' style="font-size:6vw; transform: translateY(5%); ">0</span>
                </div>
                <div style="display: flex;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26.4 38.8" style="width:5vw"><defs><style>.cls-1{fill:#fff}.cls-2,.cls-5{fill:none;stroke-miterlimit:4}.cls-2{stroke:#5d5c5c}.cls-5{stroke:#707070}</style></defs><g id="레이어_2" data-name="레이어 2"><g id="레이어_1-2" data-name="레이어 1"><g id="그룹_4" data-name="그룹 4"><g id="사각형_1" data-name="사각형 1"><path d="M-6.8 15.4h40v8h-40z" class="cls-1" transform="rotate(-61 13.2 19.4)"/><path d="M-6.3 15.9h39v7h-39z" class="cls-2" transform="rotate(-61 13.2 19.4)"/></g><g id="타원_1" data-name="타원 1"><circle cx="13.2" cy="19.4" r="2" fill="#ff8282"/><circle cx="13.2" cy="19.4" r="1.5" fill="none" stroke="#ff8282"/></g></g><g id="사각형_4" data-name="사각형 4"><path d="M-6.8 15.4h40v8h-40z" class="cls-1" transform="rotate(-61 13.2 19.4)"/><path d="M-6.3 15.9h39v7h-39z" class="cls-2" transform="rotate(-61 13.2 19.4)"/></g><g id="타원_11" data-name="타원 11"><circle cx="11.6" cy="24.3" r="1" class="cls-1"/><circle cx="11.6" cy="24.3" r=".5" class="cls-5"/></g><g id="타원_12" data-name="타원 12"><circle cx="13.6" cy="20.8" r="1" class="cls-1"/><circle cx="13.6" cy="20.8" r=".5" class="cls-5"/></g><g id="타원_13" data-name="타원 13"><circle cx="15.5" cy="17.3" r="1" class="cls-1"/><circle cx="15.5" cy="17.3" r=".5" class="cls-5"/></g><g id="타원_14" data-name="타원 14"><circle cx="17.4" cy="13.8" r="1" class="cls-1"/><circle cx="17.4" cy="13.8" r=".5" class="cls-5"/></g><g id="타원_15" data-name="타원 15"><circle cx="8.9" cy="25.1" r="1" class="cls-1"/><circle cx="8.9" cy="25.1" r=".5" class="cls-5"/></g><g id="타원_16" data-name="타원 16"><circle cx="10.9" cy="21.6" r="1" class="cls-1"/><circle cx="10.9" cy="21.6" r=".5" class="cls-5"/></g><g id="타원_17" data-name="타원 17"><circle cx="12.8" cy="18.1" r="1" class="cls-1"/><circle cx="12.8" cy="18.1" r=".5" class="cls-5"/></g><g id="타원_18" data-name="타원 18"><circle cx="14.7" cy="14.6" r="1" class="cls-1"/><circle cx="14.7" cy="14.6" r=".5" class="cls-5"/></g></g></g></svg>
                    <span style="font-size:6vw; transform: translateY(5%); ">0</span>
                </div>
            </div>
        </div>
        <span id='buttons'>
            <span data-toggle='modal' data-target='#tsumo-box'>쯔모</span><br>
            <span data-toggle='modal' data-target='#ron-box'>론</span><br>
            <span data-toggle='modal' data-target='#nagare-box'>유국</span>
        </span>
    </div>
    <div id='tsumo-box' class='modal fade'>
        <div  id='tsumo' class='popup modal-dialog'>
            <div id='hoora_score' class='modal-content'>
                <div style='font-size: 1.8rem;'class='modal-header'>
                    쯔모 화료 점수 계산
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                </div>
                <div class='modal-body row' style='justify-content:center'>
                    <div class="form-check">
                        <div>
                        <input class="form-check-input" type="radio" name="who_tsumo" id="tong_tsumo" value="option1" checked>
                        <label class="form-check-label" for="tong_tsumo">
                            동가
                        </label>
                        </div>
                        <div>
                        <input class="form-check-input" type="radio" name="who_tsumo" id="nan_tsumo" value="option2">
                        <label class="form-check-label" for="nan_tsumo">
                            남가
                        </label>
                       </div>
                       <div>
                        <input class="form-check-input" type="radio" name="who_tsumo" id="sha_tsumo" value="option3">
                        <label class="form-check-label" for="sha_tsumo">
                            서가
                        </label>
                    </div>
                    <div>    
                        <input class="form-check-input" type="radio" name="who_tsumo" id="pe_tsumo" value="option4">
                        <label class="form-check-label" for="pe_tsumo">
                            북가
                        </label>
                        </div>
                    </div>
                    <div class="col-8">
                    <div style='text-align: center; margin-bottom: 6px'>
                        <select class="form-control form-control-lg" id='tsumo_pan'>
                        <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13+</option>
                    </select>판</div>
                    <div style='text-align: center'>
                        <select class="form-control form-control-lg" id="tsumo_fu">
                        <option>20</option><option>30</option><option>40</option><option>50</option><option>60</option><option>70</option><option>80</option><option>90</option><option>100</option><option>110+</option>
                    </select>부</div>
                </div>
            </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="tsumo_button" data-dismiss='modal'>쯔모</button>
                  </div>
            </div>
        </div>
    </div>
    <div id='ron-box' class='modal fade'>
        <div  id='ron' class='popup modal-dialog'>
            <div class='modal-content'>
                <div style='font-size: 1.8rem;'class='modal-header'>
                    론 화료 점수 계산
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                </div>
                <div class='modal-body' style='align-items:center'>
                    <div style='text-align: center; margin-bottom: 6px'>
                        <select class="form-control form-control-lg">
                        <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13+</option>
                    </select>판</div>
                    <div style='text-align: center'>
                        <select class="form-control form-control-lg">
                        <option>20</option><option>30</option><option>40</option><option>50</option><option>60</option><option>70</option><option>80</option><option>90</option><option>100</option><option>110+</option>
                    </select>부</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary">론</button>
                  </div>
            </div>
        </div>
    </div>
    <div id='nagare-box' class='modal fade'>
        <div  id='nagare' class='popup modal-dialog'>
            <div class='modal-content'>
                <div style='font-size: 1.8rem;'class='modal-header'>
                    유국 점수 계산
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                </div>
                <div class='modal-body' style='align-items:center'>
                    <div style='text-align: center; margin-bottom: 6px'>
                        <select class="form-control form-control-lg">
                        <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13+</option>
                    </select>판</div>
                    <div style='text-align: center'>
                        <select class="form-control form-control-lg">
                        <option>20</option><option>30</option><option>40</option><option>50</option><option>60</option><option>70</option><option>80</option><option>90</option><option>100</option><option>110+</option>
                    </select>부</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary">유국</button>
                </div>
            </div>
        </div>
    </div>

    </div>
</body>
<script>
    var riichi_chk = [0, 0, 0, 0];
    var riichi_cnt = 0;
    var score = [25000, 25000, 25000, 25000];
    var time = 0; //0 = 동1국, 1 = 동2국, 2 = 동3국, 3 = 동4국, 4 = 남1국...
    var score_timer = [null, null, null, null];

    real_east = document.getElementById('east_div');
    real_south = document.getElementById('south_div');
    real_west = document.getElementById('west_div');
    real_north = document.getElementById('north_div');
    east_score = document.getElementById('east_score');
    south_score = document.getElementById('south_score');
    west_score = document.getElementById('west_score');
    north_score = document.getElementById('north_score');

    document.getElementById("east_div").addEventListener("click",  function(){
        riichi_chk[0] = Math.abs(riichi_chk[0]-1);
        if (riichi_chk[0] == 1) {
            riichi_cnt += 1;
            score[0] -= 1000;
            document.getElementById("east_div").style.backgroundSize = '40vw';
        } else {
            riichi_cnt -= 1;
            score[0] += 1000;
            document.getElementById("east_div").style.backgroundSize = '0vw';
        }
        refresh();
    });
    document.getElementById("south_div").addEventListener("click",  function(){
        riichi_chk[1] = Math.abs(riichi_chk[1]-1);
        if (riichi_chk[1] == 1) {
            riichi_cnt += 1;
            score[1] -= 1000;
            document.getElementById("south_div").style.backgroundSize = '40vw';
        } else {
            riichi_cnt -= 1;
            score[1] += 1000;
            document.getElementById("south_div").style.backgroundSize = '0vw';
        }
        refresh();
    });
    document.getElementById("west_div").addEventListener("click",  function(){
        riichi_chk[2] = Math.abs(riichi_chk[2]-1);
        if (riichi_chk[2] == 1) {
            riichi_cnt += 1;
            score[2] -= 1000;
            document.getElementById("west_div").style.backgroundSize = '40vw';
        } else {
            riichi_cnt -= 1;
            score[2] += 1000;
            document.getElementById("west_div").style.backgroundSize = '0vw';
        }
        refresh();
    });
    document.getElementById("north_div").addEventListener("click",  function(){
        riichi_chk[3] = Math.abs(riichi_chk[3]-1);
        if (riichi_chk[3] == 1) {
            riichi_cnt += 1;
            score[3] -= 1000;
            document.getElementById("north_div").style.backgroundSize = '40vw';
        } else {
            riichi_cnt -= 1;
            score[3] += 1000;
            document.getElementById("north_div").style.backgroundSize = '0vw';
        }
        refresh();
    });
    document.getElementById("tsumo_button").addEventListener("click", function() {
        //대충 쯔모한 사람이 친인지 판별하는 if문
            //대충 친이면 올 n점 하고 연장봉 올린 다음 친 넘어가지 않게 하기
            //대충 친이 아니면 동가한테 카부리하고 친 넘어가게 하기
            //친 넘어가는 함수를 만들자 아예
        who_tsumo = document.getElementById(['tong_tsumo', 'nan_tsumo', 'sha_tsumo', 'pe_tsumo'][time%4]);
        pan = parseInt(document.getElementById('tsumo_pan').value);
        fu = parseInt(document.getElementById('tsumo_fu').value);
        if(who_tsumo.checked) {
            var base_score = 2**(2+pan)*fu*2; 
            if(base_score%100) base_score = base_score - base_score%100 + 100;
            if(pan == 3 && fu >= 70 || pan == 4 && fu >= 40 || pan > 4) base_score = 4000;
            if(pan > 5) base_score = 6000;
            if(pan > 7) base_score = 8000;
            if(pan > 10) base_score = 12000;
            if(pan > 12) base_score = 16000
            var e = score[time%4]+base_score * 3;
            var s =  score[(time+1)%4] - base_score;
            var w = score[(time+2)%4] - base_score;
            var n = score[(time+3)%4] - base_score;
            score_timer[0] = setInterval(function(){score_animation(0, e)}, 1);
            score_timer[1] = setInterval(function(){score_animation(1, s)}, 1);
            score_timer[2] = setInterval(function(){score_animation(2, w)}, 1);
            score_timer[3] = setInterval(function(){score_animation(3, n)}, 1);

        } else {
            next_time();
        }
        refresh();
    })
    document.getElementById("center_div").addEventListener("click", goFull);

    function goFull() {
       document.documentElement.requestFullscreen();
    }
    function refresh() {
        east_score.innerHTML = parseInt(score[0]/100);
        south_score.innerHTML = parseInt(score[1]/100);
        west_score.innerHTML = parseInt(score[2]/100);
        north_score.innerHTML = parseInt(score[3]/100);
        document.getElementById("riichi").innerHTML = riichi_cnt;
        
    }
    function score_animation(i, end) {
        console.log(i, score[i], end)
        score[i] += 100 * (end > score[i] ? 1 : -1);
        refresh();
        if(end == score[i]) {
            clearInterval(score_timer[i]);
         }
    }
    function next_time() {
        time++;
        real_east.firstChild.innerHTML = ['東', '北', '西', '南'][time%4];
        real_south.firstChild.innerHTML = ['東', '北', '西', '南'][(time+3)%4];
        real_west.firstChild.innerHTML = ['東', '北', '西', '南'][(time+2)%4];
        real_north.firstChild.innerHTML = ['東', '北', '西', '南'][(time+1)%4];

        [real_east, real_south, real_west, real_north][time%4].firstChild.style.color = 'red';
        [real_east, real_south, real_west, real_north][(time+3)%4].firstChild.style.color = 'black';

        curr_time = document.getElementById('curr_time');
        curr_time.innerHTML = ['동 ', '남 '][parseInt(time/4)] + String(time%4+1) + ' 국';
    }
</script>
</html>
